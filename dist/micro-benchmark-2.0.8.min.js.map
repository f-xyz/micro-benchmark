{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","createConfig.js","micro-benchmark-2.0.8.min.js","index.js","profile.js","profileAsync.js","report.js","suite.js","suiteAsync.js","util.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","microBenchmark","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"createConfig","defaults","options","config","Object","keys","forEach","key",2,"profile","profileAsync","suite","suiteAsync","report","util","./profile","./profileAsync","./report","./suite","./suiteAsync","./util",3,"fn","Function","lastResult","elapsed","maxOperations","duration","started","Date","now","operations","ops","time","./createConfig",4,"cb","run","currentResult","result",5,"getMaxLength","headerLength","headers","column","map","prop","columnLength","maxColumnLength","max","Math","getChartLength","x","maxOps","chartWidth","k","original","isNaN","round","name","formatNumber","nameMaxLength","opsMaxLength","timeMaxLength","rowSeparator","cellSeparator","rows","pad","repeat","join","padLeft","output","push",6,"extractName","exclude","words","toString","match","filter","indexOf","trim","specs","limitTime","limitOps","uniqId","sort","b","console","log",7,"queue","results","spec","shift",8,"toFixed","toExponential","replace","str","char","undefined","list","apply","times","Array","prefix","String","counter","reset"],"mappings":"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","file":"micro-benchmark-2.0.8.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","function createConfig(defaults, options) {\n    var config = defaults;\n    Object.keys(options || {}).forEach(function (key) {\n        config[key] = options[key];\n    });\n    return config;\n}\n\nmodule.exports = createConfig;\n",null,"var profile = require('./profile');\nvar profileAsync = require('./profileAsync');\nvar suite = require('./suite');\nvar suiteAsync = require('./suiteAsync');\nvar report = require('./report');\nvar util = require('./util');\n\nmodule.exports = {\n    profile: profile,\n    profileAsync: profileAsync,\n    suite: suite,\n    suiteAsync: suiteAsync,\n    report: report,\n    util: util\n};\n","var createConfig = require('./createConfig');\n\nfunction profile(fn, options) {\n\n    if (!(fn instanceof Function)) {\n        throw new Error('No function to profile!');\n    }\n\n    var config = createConfig({\n        maxOperations: 1e3,\n        duration: 100\n    }, options);\n\n    var started = Date.now();\n    var lastResult,\n        elapsed,\n        operations = 0;\n\n    while (true) {\n\n        lastResult = fn();\n        elapsed = Date.now() - started;\n        operations++;\n\n        if (elapsed >= config.duration\n        ||  operations >= config.maxOperations) {\n            break;\n        }\n    }\n\n    return {\n        ops: operations / elapsed * 1000,\n        time: elapsed / operations,\n        lastResult: lastResult\n    };\n}\n\nmodule.exports = profile;","var createConfig = require('./createConfig');\n\nfunction profileAsync(fn, options, cb) {\n\n    if (!(fn instanceof Function)) {\n        throw new Error('No function to profile!');\n    }\n\n    if (!(cb instanceof Function)) {\n        throw new Error('No callback function!');\n    }\n\n    var config = createConfig({\n        maxOperations: 1e3,\n        duration: 100\n    }, options);\n\n    var started = Date.now();\n    var lastResult,\n        elapsed,\n        operations = 0;\n\n    var run = function (currentResult) {\n        lastResult = currentResult;\n        elapsed = Date.now() - started;\n        operations++;\n\n        if (elapsed >= config.duration\n        ||  operations >= config.maxOperations) {\n\n            var result = {\n                ops: operations / elapsed * 1000,\n                time: elapsed / operations,\n                lastResult: lastResult\n            };\n\n            cb(result);\n\n        } else {\n            fn(run);\n        }\n    };\n\n    fn(run);\n}\n\nmodule.exports = profileAsync;","var suite = require('./suite');\nvar formatNumber = require('./util').formatNumber;\nvar util = require('./util');\n\nfunction report(result, options) {\n\n    var getMaxLength = function (key) {\n        var headerLength = headers[key].length;\n\n        var column = result.map(util.prop(key));\n        var columnLength = column.map(util.prop('length'));\n        var maxColumnLength = util.max(columnLength);\n\n        return Math.max(headerLength, maxColumnLength);\n    };\n\n    var getChartLength = function (x, maxOps) {\n        var chartWidth = config.chartWidth;\n        var k = x.original.ops / maxOps;\n        if (isNaN(k)) {\n            return chartWidth;\n        }\n        return Math.round(chartWidth * k);\n    };\n\n    // init\n\n    var config = {\n        chartWidth: 30\n    };\n\n    if (typeof options == 'object' ) {\n        Object.keys(options).forEach(function (key) {\n            config[key] = options[key];\n        });\n    }\n\n    // column headers\n    var headers = {\n        name: 'Name',\n        ops: 'Operations per second',\n        time: 'Average time, ms'\n    };\n\n    // max operations per second value\n    var maxOps = util.max(result.map(util.prop('ops')));\n\n    // formatting\n    result = result.map(function (x) {\n        return {\n            name: x.name,\n            ops: util.formatNumber(x.ops),\n            time: util.formatNumber(x.time),\n            lastResult: x.lastResult,\n            original: x\n        };\n    });\n\n    // columns' widths\n    var nameMaxLength = getMaxLength('name');\n    var opsMaxLength = getMaxLength('ops');\n    var timeMaxLength = getMaxLength('time');\n\n    // final processing and output\n    var rowSeparator = '\\n';\n    var cellSeparator = '    ';\n\n    var rows = result\n        .map(function (x) {\n            return [\n                util.pad(x.name, nameMaxLength),\n                util.pad(x.ops, opsMaxLength),\n                util.pad(x.time, timeMaxLength),\n                util.repeat('=', getChartLength(x, maxOps)) + '>'\n            ].join(cellSeparator);\n        });\n\n    headers = [\n        util.pad(headers.name, nameMaxLength),\n        util.pad(headers.ops, opsMaxLength),\n        util.padLeft(headers.time, timeMaxLength)\n    ];\n\n    var output = [];\n    output.push(headers.join(cellSeparator));\n    output.push(rows.join(rowSeparator));\n\n    return output.join('\\n');\n}\n\nmodule.exports = report;","var util = require('./util');\nvar profile = require('./profile');\nvar report = require('./report');\n\nfunction extractName(fn) {\n    var exclude = ['function', 'return'];\n    var words = fn\n        .toString()\n        .match(/(\\w+)/g)\n        .filter(function (x) {\n            return exclude.indexOf(x.trim()) == -1;\n        });\n    return words.join(' ');\n}\n\nfunction suite(options) {\n\n    var config = {\n        repeat: 1,\n        specs: [],\n        limitTime: 100,\n        limitOps: 1000,\n        report: true,\n        chartWidth: 10\n    };\n\n    if (options) {\n        Object.keys(options).forEach(function (key) {\n            config[key] = options[key];\n        });\n    }\n\n    var result = config.specs.map(function (fn) {\n        var name = fn.name || extractName(fn) || util.uniqId('func-');\n        var repeater = function () {\n            for (var i = 0; i < config.repeat; i++) {\n                \n            }\n        };\n        var result = profile(fn, config);\n        return {\n            name: name,\n            ops: result.ops,\n            time: result.time,\n            lastResult: result.lastResult\n        };\n    });\n\n    result.sort(function (a, b) {\n        return b.ops - a.ops;\n    });\n\n    if (config.report) {\n        console.log(report(result, config));\n    }\n\n    return result;\n}\n\nmodule.exports = suite;","var profileAsync = require('./profileAsync');\nvar util = require('./util');\n\n/**\n * @param config\n * @param cb\n */\nfunction suiteAsync(config, cb) {\n    var specs = config.specs;\n\n    (function run(queue, results) {\n        var spec = queue.shift();\n        if (spec) {\n            profileAsync(spec.fn, config, function (result) {\n                results.push({\n                    name: spec.name || util.uniqId('suite-'),\n                    ops: result.ops,\n                    time: result.time,\n                    lastResult: result.lastResult\n                });\n                run(queue, results);\n            });\n        } else {\n            cb(results);\n        }\n    }(specs, []));\n}\n\nmodule.exports = suiteAsync;","function formatNumber(n) {\n    if (typeof n == 'number') {\n        switch (true) {\n            case n === 0:\n                return '0';\n            case n < 1:\n                return n.toFixed(2);\n            case n < 1000:\n                return n.toFixed(0);\n            default:\n                return n.toExponential(1)\n                    .replace(/e\\+/, ' x 10^');\n        }\n    } else {\n        return n;\n    }\n}\n\n//////////////////////////////////////////////////////////////////////////////\n\nfunction pad(str, n, char) {\n    if (char === undefined || char === '') {\n        char = ' ';\n    }\n    if (str.length < n) {\n        return pad(str + char, n, char);\n    }\n    return str;\n}\n\nfunction padLeft(str, n, char) {\n    if (char === undefined || char === '') {\n        char = ' ';\n    }\n    if (str.length < n) {\n        return padLeft(char + str, n, char);\n    }\n    return str;\n}\n\n//////////////////////////////////////////////////////////////////////////////\n\nfunction prop(key) {\n    return function (x) {\n        return x[key];\n    };\n}\n\nfunction max(list) {\n    return Math.max.apply(Math, list);\n}\n\nfunction repeat(str, times) {\n    return new Array(times + 1).join(str);\n}\n\nfunction uniqId(prefix) {\n    return prefix + String(uniqId.counter++);\n}\nuniqId.counter = 0;\nuniqId.reset = function (counter) { uniqId.counter = counter };\n\n//////////////////////////////////////////////////////////////////////////////\n\nmodule.exports = {\n    // number\n    formatNumber: formatNumber,\n    // string\n    pad: pad,\n    padLeft: padLeft,\n    // functional\n    prop: prop,\n    max: max,\n    repeat: repeat,\n    uniqId: uniqId\n};\n"],"sourceRoot":"/source/"}